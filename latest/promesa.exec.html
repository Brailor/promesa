<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>promesa.exec documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Promesa</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="user-guide.html"><div class="inner"><span>User Guide</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>promesa</span></div></div></li><li class="depth-2 branch"><a href="promesa.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="promesa.exec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exec</span></div></a></li><li class="depth-3"><a href="promesa.exec.bulkhead.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bulkhead</span></div></a></li><li class="depth-2"><a href="promesa.protocols.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>protocols</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="promesa.exec.html#var-*default-executor*"><div class="inner"><span>*default-executor*</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-*default-scheduler*"><div class="inner"><span>*default-scheduler*</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-cached-executor"><div class="inner"><span>cached-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-cached-pool"><div class="inner"><span>cached-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-configure-default-executor.21"><div class="inner"><span>configure-default-executor!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-counter"><div class="inner"><span>counter</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-default-executor"><div class="inner"><span>default-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-default-forkjoin-thread-factory"><div class="inner"><span>default-forkjoin-thread-factory</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-default-scheduler"><div class="inner"><span>default-scheduler</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-default-thread-factory"><div class="inner"><span>default-thread-factory</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-executor.3F"><div class="inner"><span>executor?</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-fixed-executor"><div class="inner"><span>fixed-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-fixed-pool"><div class="inner"><span>fixed-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-forkjoin-executor"><div class="inner"><span>forkjoin-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-forkjoin-pool"><div class="inner"><span>forkjoin-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-noop"><div class="inner"><span>noop</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-pmap"><div class="inner"><span>pmap</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-resolve-executor"><div class="inner"><span>resolve-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-resolve-scheduler"><div class="inner"><span>resolve-scheduler</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-run.21"><div class="inner"><span>run!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-same-thread-executor"><div class="inner"><span>same-thread-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-schedule.21"><div class="inner"><span>schedule!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-scheduled-executor"><div class="inner"><span>scheduled-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-scheduled-pool"><div class="inner"><span>scheduled-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-shutdown.21"><div class="inner"><span>shutdown!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-shutdown-now.21"><div class="inner"><span>shutdown-now!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-single-executor"><div class="inner"><span>single-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-single-pool"><div class="inner"><span>single-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-submit.21"><div class="inner"><span>submit!</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-thread-executor"><div class="inner"><span>thread-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-thread-factory.3F"><div class="inner"><span>thread-factory?</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-vthread-executor"><div class="inner"><span>vthread-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-vthreads-supported.3F"><div class="inner"><span>vthreads-supported?</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-with-dispatch"><div class="inner"><span>with-dispatch</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-with-executor"><div class="inner"><span>with-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-work-stealing-executor"><div class="inner"><span>work-stealing-executor</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-work-stealing-pool"><div class="inner"><span>work-stealing-pool</span></div></a></li><li class="depth-1"><a href="promesa.exec.html#var-wrap-bindings"><div class="inner"><span>wrap-bindings</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">promesa.exec</h1><div class="doc"><div class="markdown"><p>Executors &amp; Schedulers facilities.</p>
</div></div><div class="public anchor" id="var-*default-executor*"><h3>*default-executor*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L42">view source</a></div></div><div class="public anchor" id="var-*default-scheduler*"><h3>*default-scheduler*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L41">view source</a></div></div><div class="public anchor" id="var-cached-executor"><h3>cached-executor</h3><div class="usage"><code>(cached-executor &amp; {:keys [factory]})</code></div><div class="doc"><div class="markdown"><p>A cached thread executor pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L309">view source</a></div></div><div class="public anchor" id="var-cached-pool"><h3>cached-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(cached-pool)</code><code>(cached-pool opts)</code></div><div class="doc"><div class="markdown"><p>A cached thread pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L245">view source</a></div></div><div class="public anchor" id="var-configure-default-executor.21"><h3>configure-default-executor!</h3><div class="usage"><code>(configure-default-executor! &amp; params)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L373">view source</a></div></div><div class="public anchor" id="var-counter"><h3>counter</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L189">view source</a></div></div><div class="public anchor" id="var-default-executor"><h3>default-executor</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A global, default executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L66">view source</a></div></div><div class="public anchor" id="var-default-forkjoin-thread-factory"><h3>default-forkjoin-thread-factory</h3><div class="usage"><code>(default-forkjoin-thread-factory &amp; {:keys [name daemon], :or {name "promesa/forkjoin/%s", daemon true}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L205">view source</a></div></div><div class="public anchor" id="var-default-scheduler"><h3>default-scheduler</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A global, default scheduler executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L60">view source</a></div></div><div class="public anchor" id="var-default-thread-factory"><h3>default-thread-factory</h3><div class="usage"><code>(default-thread-factory &amp; {:keys [name daemon priority], :or {daemon true, priority Thread/NORM_PRIORITY, name "promesa/thread/%s"}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L192">view source</a></div></div><div class="public anchor" id="var-executor.3F"><h3>executor?</h3><div class="usage"><code>(executor? o)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L89">view source</a></div></div><div class="public anchor" id="var-fixed-executor"><h3>fixed-executor</h3><div class="usage"><code>(fixed-executor &amp; {:keys [parallelism factory]})</code></div><div class="doc"><div class="markdown"><p>A fixed thread executor pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L317">view source</a></div></div><div class="public anchor" id="var-fixed-pool"><h3>fixed-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(fixed-pool n)</code><code>(fixed-pool n opts)</code></div><div class="doc"><div class="markdown"><p>A fixed thread pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L255">view source</a></div></div><div class="public anchor" id="var-forkjoin-executor"><h3>forkjoin-executor</h3><div class="usage"><code>(forkjoin-executor &amp; {:keys [factory async? parallelism], :or {async? true}})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L357">view source</a></div></div><div class="public anchor" id="var-forkjoin-pool"><h3>forkjoin-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(forkjoin-pool {:keys [factory async? parallelism], :or {async? true}, :as opts})</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L292">view source</a></div></div><div class="public anchor" id="var-noop"><h3>noop</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L53">view source</a></div></div><div class="public anchor" id="var-pmap"><h3>pmap</h3><div class="usage"><code>(pmap f coll)</code><code>(pmap f coll &amp; colls)</code></div><div class="doc"><div class="markdown"><p>Analogous to the <code>clojure.core/pmap</code> with the excetion that it allows use a custom executor (binded to <em>default-executor</em> var) The default clojure chunk size (32) is used for evaluation and the real parallelism is determined by the provided executor.</p>
<p>EXPERIMENTAL API: This function should be considered EXPERIMENTAL and may be changed or removed in future versions until this notification is removed.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L522">view source</a></div></div><div class="public anchor" id="var-resolve-executor"><h3>resolve-executor</h3><div class="usage"><code>(resolve-executor)</code><code>(resolve-executor executor)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L104">view source</a></div></div><div class="public anchor" id="var-resolve-scheduler"><h3>resolve-scheduler</h3><div class="usage"><code>(resolve-scheduler)</code><code>(resolve-scheduler scheduler)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L114">view source</a></div></div><div class="public anchor" id="var-run.21"><h3>run!</h3><div class="usage"><code>(run! f)</code><code>(run! executor f)</code></div><div class="doc"><div class="markdown"><p>Run the task in the provided executor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L145">view source</a></div></div><div class="public anchor" id="var-same-thread-executor"><h3>same-thread-executor</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A global thread executor that uses the same thread to run the code.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L72">view source</a></div></div><div class="public anchor" id="var-schedule.21"><h3>schedule!</h3><div class="usage"><code>(schedule! ms f)</code><code>(schedule! scheduler ms f)</code></div><div class="doc"><div class="markdown"><p>Schedule a callable to be executed after the <code>ms</code> delay is reached.</p>
<p>In JVM it uses a scheduled executor service and in JS it uses the <code>setTimeout</code> function.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L163">view source</a></div></div><div class="public anchor" id="var-scheduled-executor"><h3>scheduled-executor</h3><div class="usage"><code>(scheduled-executor &amp; {:keys [parallelism factory], :or {parallelism 1}})</code></div><div class="doc"><div class="markdown"><p>A scheduled thread pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L333">view source</a></div></div><div class="public anchor" id="var-scheduled-pool"><h3>scheduled-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(scheduled-pool)</code><code>(scheduled-pool n)</code><code>(scheduled-pool n opts)</code></div><div class="doc"><div class="markdown"><p>A scheduled thread pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L275">view source</a></div></div><div class="public anchor" id="var-shutdown.21"><h3>shutdown!</h3><div class="usage"><code>(shutdown! executor)</code></div><div class="doc"><div class="markdown"><p>Shutdowns the executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L94">view source</a></div></div><div class="public anchor" id="var-shutdown-now.21"><h3>shutdown-now!</h3><div class="usage"><code>(shutdown-now! executor)</code></div><div class="doc"><div class="markdown"><p>Shutdowns and interrupts the executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L99">view source</a></div></div><div class="public anchor" id="var-single-executor"><h3>single-executor</h3><div class="usage"><code>(single-executor &amp; {:keys [factory]})</code></div><div class="doc"><div class="markdown"><p>A single thread executor pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L325">view source</a></div></div><div class="public anchor" id="var-single-pool"><h3>single-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(single-pool)</code><code>(single-pool opts)</code></div><div class="doc"><div class="markdown"><p>A single thread pool constructor.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L265">view source</a></div></div><div class="public anchor" id="var-submit.21"><h3>submit!</h3><div class="usage"><code>(submit! f)</code><code>(submit! executor f)</code></div><div class="doc"><div class="markdown"><p>Submit a task to be executed in a provided executor and return a promise that will be completed with the return value of a task.</p>
<p>A task is a plain clojure function.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L152">view source</a></div></div><div class="public anchor" id="var-thread-executor"><h3>thread-executor</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A global, thread per task executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L83">view source</a></div></div><div class="public anchor" id="var-thread-factory.3F"><h3>thread-factory?</h3><div class="usage"><code>(thread-factory? o)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L177">view source</a></div></div><div class="public anchor" id="var-vthread-executor"><h3>vthread-executor</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A global, virtual thread per task executor service.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L77">view source</a></div></div><div class="public anchor" id="var-vthreads-supported.3F"><h3>vthreads-supported?</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L44">view source</a></div></div><div class="public anchor" id="var-with-dispatch"><h3>with-dispatch</h3><h4 class="type">macro</h4><div class="usage"><code>(with-dispatch executor &amp; body)</code></div><div class="doc"><div class="markdown"><p>Helper macro for dispatch execution of the body to an executor service. The returned promise is not cancellable (the body will be executed independently of the cancellation).</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L491">view source</a></div></div><div class="public anchor" id="var-with-executor"><h3>with-executor</h3><h4 class="type">macro</h4><div class="usage"><code>(with-executor executor &amp; body)</code></div><div class="doc"><div class="markdown"><p>Binds the <em>default-executor</em> var with the provided executor, executes the macro body. It also can optionally shutdown or shutdown and interrupt on termination if you provide <code>^:shutdown</code> and <code>^:interrupt</code> metadata.</p>
<p>EXPERIMENTAL API: This function should be considered EXPERIMENTAL and may be changed or removed in future versions until this notification is removed.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L499">view source</a></div></div><div class="public anchor" id="var-work-stealing-executor"><h3>work-stealing-executor</h3><div class="usage"><code>(work-stealing-executor &amp; params)</code></div><div class="doc"><div class="markdown"><p>An alias for the <code>forkjoin-executor</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L367">view source</a></div></div><div class="public anchor" id="var-work-stealing-pool"><h3>work-stealing-pool</h3><h4 class="deprecated">deprecated in 9.0</h4><div class="usage"><code>(work-stealing-pool)</code><code>(work-stealing-pool n)</code></div><div class="doc"><div class="markdown"><p>Creates a work-stealing thread pool.</p>
</div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L285">view source</a></div></div><div class="public anchor" id="var-wrap-bindings"><h3>wrap-bindings</h3><div class="usage"><code>(wrap-bindings f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/funcool/promesa/blob/master/src/promesa/exec.cljc#L121">view source</a></div></div></div></body></html>